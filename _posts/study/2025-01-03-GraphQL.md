---
layout: single
title: "GraphQL?"
categories: "common_topic"
tags: [common]
toc: true
toc_sticky: true
toc_label: "λ©μ°¨"
---

# π¤“ GraphQLμ΄ κ°λ°λ μ΄μ 

> GraphQLμ€ Facebookμ΄ μμ‚¬ μ• ν”λ¦¬μΌ€μ΄μ…μ μ„±λ¥ λ¬Έμ μ™€ REST APIμ ν•κ³„λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ 2012λ…„μ— κ°λ°ν• κΈ°μ μ…λ‹λ‹¤. **GraphQLμ νƒ„μƒ λ°°κ²½**μ€ REST APIμ—μ„ λ°μƒν•λ” λ‡ κ°€μ§€ μ£Όμ” λ¬Έμ λ¥Ό λ³΄μ™„ν•λ ¤λ” μλ„μ—μ„ λΉ„λ΅―λμ—μµλ‹λ‹¤.

### 1. κ³Όλ‹¤ μ”μ²­(Over-fetching) λ¬Έμ 

REST APIμ—μ„λ” ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ” μ΄μƒμΌλ΅ λ§μ€ λ°μ΄ν„°λ¥Ό λ°›λ” κ²½μ°κ°€ ν”ν•©λ‹λ‹¤.

- **λ¬Έμ **: νΉμ • λ°μ΄ν„°λ¥Ό μ–»κΈ° μ„ν•΄ μ—¬λ¬ μ†μ„±μ„ ν¬ν•¨ν• μ „μ²΄ λ°μ΄ν„°λ¥Ό λ°ν™.
- **μμ‹**: μ‚¬μ©μμ μ΄λ¦„λ§ ν•„μ”ν• κ²½μ°μ—λ„ μ‚¬μ©μμ μ „μ²΄ ν”„λ΅ν•„ λ°μ΄ν„°λ¥Ό λ°ν™.

### 2. κ³Όμ† μ”μ²­(Under-fetching) λ¬Έμ 

REST APIλ” μμ›μ κµ¬μ΅°κ°€ κ³ μ •λμ–΄ μμ–΄ λ³µμ΅ν• κ΄€κ³„ν• λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•κΈ° μ–΄λ ¤μ΄ κ²½μ°κ°€ μμµλ‹λ‹¤.

- **λ¬Έμ **: ν•„μ”ν• λ°μ΄ν„°λ¥Ό μ–»κΈ° μ„ν•΄ μ—¬λ¬ λ²μ API νΈμ¶μ΄ ν•„μ”.
- **μμ‹**: μ‚¬μ©μμ μ •λ³΄μ™€ ν•΄λ‹Ή μ‚¬μ©μμ κ²μ‹κΈ€μ„ μ”μ²­ν•λ ¤λ©΄ λ³„λ„μ API νΈμ¶μ΄ ν•„μ”.

### 3. λ‹¤μ–‘ν• ν΄λΌμ΄μ–ΈνΈμ μ”κµ¬μ‚¬ν•­

REST APIλ” λ¨λ“  ν΄λΌμ΄μ–ΈνΈ(μ›Ή, λ¨λ°”μΌ λ“±)μ—μ„ λ™μΌν• λ°μ΄ν„°λ¥Ό μ κ³µν•κΈ° λ•λ¬Έμ—, ν΄λΌμ΄μ–ΈνΈμ νΉμ • μ”κµ¬λ¥Ό μ¶©μ΅±ν•κΈ° μ–΄λ µμµλ‹λ‹¤.

- **λ¬Έμ **: λ¨λ°”μΌ ν΄λΌμ΄μ–ΈνΈλ” λ„¤νΈμ›ν¬ ν¨μ¨μ„ μ„ν•΄ μ μ€ λ°μ΄ν„°λ¥Ό μ›ν•μ§€λ§, REST APIλ” μ „μ²΄ λ°μ΄ν„°λ¥Ό λ°ν™.

### 4. μ—”λ“ν¬μΈνΈ μ¦κ°€ λ¬Έμ 

REST APIλ” μμ›λ§λ‹¤ μ—”λ“ν¬μΈνΈλ¥Ό μ •μν•΄μ•Ό ν•λ©°, μμ›μ΄ λ§μ•„μ§μλ΅ μ—”λ“ν¬μΈνΈ κ΄€λ¦¬κ°€ λ³µμ΅ν•΄μ§‘λ‹λ‹¤.

- **λ¬Έμ **: μ—”λ“ν¬μΈνΈκ°€ λ§μ•„μ§€λ©΄μ„ μ μ§€λ³΄μ λ° ν™•μ¥μ„±μ΄ μ–΄λ ¤μ›€.

### 5. API λ¬Έμ„ν™”μ™€ νƒ€μ… κ²€μ¦ λ¬Έμ 

REST APIλ” λ…μ‹μ μΈ μ¤ν‚¤λ§κ°€ μ—†κΈ° λ•λ¬Έμ—, ν΄λΌμ΄μ–ΈνΈλ” APIμ μ‘λ™ λ°©μ‹μ„ λ¬Έμ„λ¥Ό ν†µν•΄ ν•™μµν•΄μ•Ό ν•©λ‹λ‹¤.

- **λ¬Έμ **: APIμ λ°μ΄ν„° κµ¬μ΅°λ¥Ό μμΈ΅ν•κΈ° μ–΄λ µκ³ , λ¬Έμ„κ°€ μµμ‹  μƒνƒλ΅ μ μ§€λμ§€ μ•μ„ μ μμ.

### 6. μ‹¤μ‹κ°„ λ°μ΄ν„° ν•„μ”

REST APIλ” μ£Όλ΅ μ”μ²­-μ‘λ‹µ λ°©μ‹μΌλ΅ λ™μ‘ν•λ©°, μ‹¤μ‹κ°„ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ” λ° μ ν•©ν•μ§€ μ•μµλ‹λ‹¤.

- **λ¬Έμ **: μ‹¤μ‹κ°„ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ ¤λ©΄ WebSocket κ°™μ€ λ³„λ„μ κµ¬ν„μ΄ ν•„μ”.

### GraphQLμ νƒ„μƒ λ°°κ²½: Facebookμ μ”κµ¬μ‚¬ν•­

GraphQLμ€ Facebookμ΄ λ¨λ°”μΌ μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ REST APIμ ν•κ³„λ¥Ό κ²½ν—ν•λ©΄μ„ κ°λ°λμ—μµλ‹λ‹¤.

1. **λ°μ΄ν„° λ³µμ΅μ„± μ¦κ°€**:
   - Facebookμ λ‰΄μ¤ν”Όλ“, μ‚¬μ©μ ν”„λ΅ν•„ λ“±μ€ λ‹¤μμ κ΄€κ³„ν• λ°μ΄ν„°λ¥Ό ν¬ν•¨.
   - REST APIλ΅λ” μ΄λ¬ν• λ³µμ΅ν• λ°μ΄ν„°λ¥Ό ν¨μ¨μ μΌλ΅ μ²λ¦¬ν•κΈ° μ–΄λ ¤μ› μ.
2. **λ‹¤μ–‘ν• ν΄λΌμ΄μ–ΈνΈ μ§€μ›**:
   - Facebook μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό λ¨λ°”μΌ μ•±μ΄ μ„λ΅ λ‹¤λ¥Έ λ°μ΄ν„° μ”κµ¬μ‚¬ν•­μ„ κ°€μ§.
   - REST APIμ κ³ μ •λ μ‘λ‹µ κµ¬μ΅°λ΅λ” λ¨λ“  ν΄λΌμ΄μ–ΈνΈλ¥Ό λ§μ΅±μ‹ν‚¤κΈ° μ–΄λ ¤μ› μ.
3. **μ„±λ¥ μµμ ν™” ν•„μ”**:
   - λ¨λ°”μΌ ν™κ²½μ—μ„ λ¶ν•„μ”ν• λ°μ΄ν„° μ „μ†΅μ€ μ„±λ¥κ³Ό μ‚¬μ©μ κ²½ν—μ— λ¶€μ •μ  μν–¥μ„ λ―ΈμΉ¨.
   - GraphQLμ€ ν•„μ”ν• λ°μ΄ν„°λ§ μ „μ†΅ν•μ—¬ μ„±λ¥μ„ μµμ ν™”.

# π GraphQLμ νΉμ§•κ³Ό REST API ν•κ³„ κ·Ήλ³µ!

### 1. ν΄λΌμ΄μ–ΈνΈ μ¤‘μ‹¬ λ°μ΄ν„° μ”μ²­

- ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”ν• λ°μ΄ν„°λ§ λ…μ‹μ μΌλ΅ μ”μ²­ν•  μ μμ–΄ κ³Όλ‹¤ μ”μ²­(Over-fetching) λ¬Έμ κ°€ ν•΄κ²°λ©λ‹λ‹¤.
- REST APIμ—μ„λ” νΉμ • λ°μ΄ν„°λ¥Ό μ–»κΈ° μ„ν•΄ μ „μ²΄ λ°μ΄ν„°λ¥Ό λ°ν™ν•μ§€λ§, GraphQLμ€ μ›ν•λ” λ°μ΄ν„°λ§ μ”μ²­ κ°€λ¥ν•©λ‹λ‹¤.

```groovy
query {
  user(id: 1) {
    name
  }
}
```

### 2. λ‹¨μΌ μ”μ²­μΌλ΅ λ‹¤μ¤‘ μμ› μ΅°ν

- GraphQLμ€ λ³µμ΅ν• κ΄€κ³„ν• λ°μ΄ν„°λ¥Ό ν• λ²μ μ”μ²­μΌλ΅ μ²λ¦¬ κ°€λ¥ν•μ—¬, κ³Όμ† μ”μ²­(Under-fetching) λ¬Έμ λ¥Ό κ·Ήλ³µν•©λ‹λ‹¤.
- REST APIμ—μ„λ” μ—¬λ¬ μ—”λ“ν¬μΈνΈ νΈμ¶μ΄ ν•„μ”ν• λ°μ΄ν„°λ¥Ό ν• μ”μ²­μΌλ΅ κ°€μ Έμ¬ μ μμµλ‹λ‹¤.

```graphql
query {
  user(id: 1) {
    name
    posts {
      title
    }
  }
}
```

### 3. μ μ—°ν• λ°μ΄ν„° κµ¬μ΅°

- GraphQLμ€ μ›Ή, λ¨λ°”μΌ λ“± λ‹¤μ–‘ν• ν΄λΌμ΄μ–ΈνΈμ μ”κµ¬λ¥Ό μ¶©μ΅±ν•λ” μ μ—°μ„±μ„ μ κ³µν•©λ‹λ‹¤.
- κ° ν΄λΌμ΄μ–ΈνΈλ” λ™μΌν• APIλ¥Ό μ‚¬μ©ν•λ©΄μ„λ„ ν•„μ”ν• λ°μ΄ν„°λ§ μ”μ²­ν•  μ μμµλ‹λ‹¤.

**μμ‹**:

- λ¨λ°”μΌ ν΄λΌμ΄μ–ΈνΈ: μ‚¬μ©μ μ΄λ¦„λ§ μ”μ²­.
- μ›Ή ν΄λΌμ΄μ–ΈνΈ: μ‚¬μ©μ μ΄λ¦„κ³Ό μ΄λ©”μΌμ„ μ”μ²­.

### 4. λ‹¨μΌ μ—”λ“ν¬μΈνΈ

- GraphQLμ€ `/graphql`μ΄λΌλ” λ‹¨μΌ μ—”λ“ν¬μΈνΈλ¥Ό ν†µν•΄ λ¨λ“  μ”μ²­μ„ μ²λ¦¬ν•©λ‹λ‹¤.
- REST APIμ—μ„ μ—”λ“ν¬μΈνΈκ°€ μ¦κ°€ν•μ—¬ κ΄€λ¦¬κ°€ λ³µμ΅ν•΄μ§€λ” λ¬Έμ λ¥Ό λ‹¨μν™”ν•©λ‹λ‹¤.

### 5. μ¤ν‚¤λ§ κΈ°λ° μ„¤κ³„

- GraphQLμ€ λ…ν™•ν• νƒ€μ… μ‹μ¤ν…κ³Ό μ¤ν‚¤λ§λ¥Ό μ κ³µν•μ—¬ APIμ λ°μ΄ν„° κµ¬μ΅°λ¥Ό μ •μν•©λ‹λ‹¤.
- REST APIμ—μ„λ” λ°μ΄ν„° κµ¬μ΅°λ¥Ό λ¬Έμ„ν™”ν•΄μ•Ό ν•μ§€λ§, GraphQLμ€ μ¤ν‚¤λ§λ΅ μλ™ν™”λ λ¬Έμ„ν™”μ™€ λ°μ΄ν„° κ²€μ¦μ„ μ§€μ›ν•©λ‹λ‹¤.

```graphql
type User {
  id: ID!
  name: String!
  email: String
}
```

### 6. μ‹¤μ‹κ°„ λ°μ΄ν„° μ§€μ›

- GraphQLμ€ Subscriptionμ„ ν†µν•΄ μ‹¤μ‹κ°„ λ°μ΄ν„° μ „μ†΅μ„ μ§€μ›ν•©λ‹λ‹¤.
- REST APIμ—μ„λ” μ‹¤μ‹κ°„ λ°μ΄ν„° μ²λ¦¬λ¥Ό μ„ν•΄ WebSocketκ³Ό κ°™μ€ λ³„λ„ κµ¬ν„μ΄ ν•„μ”ν•©λ‹λ‹¤.

```graphql
subscription {
  newMessage {
    id
    content
  }
}
```

# π™ƒ GraphQLμ μ¥λ‹¨μ 

### μ¥μ  :

1. **μ μ—°μ„±κ³Ό ν¨μ¨μ„±**:
   - ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”ν• λ°μ΄ν„°λ§ μ”μ²­ν•κ³ , λ„¤νΈμ›ν¬ λΉ„μ©μ„ μ κ°.
2. **λ‹¨μΌ μ—”λ“ν¬μΈνΈ**:
   - λ¨λ“  μ”μ²­μ„ λ‹¨μΌ μ—”λ“ν¬μΈνΈλ΅ μ²λ¦¬ν•μ—¬ κ΄€λ¦¬κ°€ κ°„νΈ.
3. **νƒ€μ… μ•μ „μ„±**:
   - API μ¤ν‚¤λ§λ¥Ό ν†µν•΄ λ°μ΄ν„° κµ¬μ΅°λ¥Ό λ…ν™•ν μ •μ.
4. **μ‹¤μ‹κ°„ λ°μ΄ν„° μ§€μ›**:
   - SubscriptionμΌλ΅ μ‹¤μ‹κ°„ λ°μ΄ν„°λ¥Ό κ°„λ‹¨ν μ²λ¦¬.
5. **μλ™ν™”λ λ¬Έμ„ν™”**:
   - μ¤ν‚¤λ§ κΈ°λ° μ„¤κ³„λ΅ API λ¬Έμ„ν™”κ°€ μλ™μΌλ΅ μ΄λ£¨μ–΄μ§.

### λ‹¨μ  :

1. **κµ¬ν„ λ³µμ΅μ„±**:
   - GraphQL μ„λ²„ μ„¤μ • λ° μ¤ν‚¤λ§ μ„¤κ³„κ°€ REST APIλ³΄λ‹¤ λ³µμ΅.
2. **μ΄κΈ° ν•™μµ κ³΅μ„ **:
   - GraphQLμ νƒ€μ… μ‹μ¤ν…κ³Ό μΏΌλ¦¬ μ–Έμ–΄λ¥Ό ν•™μµν•΄μ•Ό ν•¨.
3. **μΊμ‹± μ–΄λ ¤μ›€**:
   - REST APIμ HTTP μΊμ‹± ν—¤λ”λ¥Ό μ§μ ‘ ν™μ©ν•κΈ° μ–΄λ ¤μ›, λ³„λ„ μΊμ‹± λ΅μ§ ν•„μ”.
4. **κ³Όλ„ν• μ”μ²­ κ°€λ¥μ„±**:
   - ν΄λΌμ΄μ–ΈνΈκ°€ λ€λ‰μ λ°μ΄ν„°λ¥Ό μ”μ²­ν•λ©΄ μ„λ²„ μ„±λ¥μ΄ μ €ν•λ  κ°€λ¥μ„±.
5. **λ””λ²„κΉ… λ³µμ΅μ„±**:
   - λ‹¨μΌ μ—”λ“ν¬μΈνΈμ—μ„ λ‹¤μ–‘ν• μ”μ²­μ„ μ²λ¦¬ν•κΈ° λ•λ¬Έμ— λ¬Έμ λ¥Ό μ¶”μ ν•κΈ° μ–΄λ ¤μΈ μ μμ.

# π GraphQL κ΄€λ ¨ μ©μ–΄

### 1. μ¤ν‚¤λ§(Schema)

GraphQL μ„λ²„μ λ°μ΄ν„° κµ¬μ΅°μ™€ ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ μ •μν•λ” "μ„¤κ³„λ„".

```graphql
type User { # User νƒ€μ… μ •μ
  id: ID! # ν•„μ ν•„λ“: κ³ μ  ID
  name: String! # ν•„μ ν•„λ“: μ‚¬μ©μ μ΄λ¦„
  email: String # μ„ νƒ ν•„λ“: μ΄λ©”μΌ
}

type Query { # μ½κΈ° μ‘μ—… μ •μ
  user(id: ID!): User # νΉμ • μ‚¬μ©μ μ΅°ν
  users: [User!] # λ¨λ“  μ‚¬μ©μ λ©λ΅ μ΅°ν
}

type Mutation { # μ“°κΈ° μ‘μ—… μ •μ
  createUser(name: String!, email: String): User # μ‚¬μ©μ μƒμ„±
}
```

### 2. μΏΌλ¦¬(Query)

λ°μ΄ν„° μ½κΈ° μ”μ²­. ν•„μ”ν• λ°μ΄ν„°λ§ μ”μ²­ κ°€λ¥.

```graphql
query {
  user(id: 1) {
    # νΉμ • μ‚¬μ©μμ λ°μ΄ν„° μ”μ²­
    name # μ΄λ¦„ ν•„λ“ μ”μ²­
    email # μ΄λ©”μΌ ν•„λ“ μ”μ²­
  }
}
```

### 3. λ®¤ν…μ΄μ…(Mutation)

λ°μ΄ν„° μƒμ„±, μμ •, μ‚­μ  μ”μ²­.

```graphql
mutation {
  createUser(name: "John", email: "john@example.com") {
    id # μƒμ„±λ μ‚¬μ©μμ ID λ°ν™
    name # μƒμ„±λ μ‚¬μ©μμ μ΄λ¦„ λ°ν™
  }
}
```

### 4. λ¦¬μ΅Έλ²„(Resolver)

μ”μ²­μ„ μ²λ¦¬ν•λ” μ„λ²„μ ν•¨μ. μ‹¤μ  λ°μ΄ν„°λ¥Ό λ°ν™.

```graphql
const resolvers = {
  Query: {
    user: (parent, args) => {
      return users.find(user => user.id === args.id);  // IDλ΅ μ‚¬μ©μ μ°ΎκΈ°
    }
  },
  Mutation: {
    createUser: (parent, args) => {
      const newUser = { id: users.length + 1, ...args }; // μ‚¬μ©μ μƒμ„±
      users.push(newUser);
      return newUser;
    }
  }
};
```

### 5. ν”„λκ·Έλ¨ΌνΈ(Fragment)

μΏΌλ¦¬μ λ°λ³µ λ¶€λ¶„μ„ μ¬μ‚¬μ©.

```graphql
fragment UserFields on User {
  # κ³µν†µ ν•„λ“ μ •μ
  id
  name
  email
}

query {
  user(id: 1) {
    ...UserFields # ν”„λκ·Έλ¨ΌνΈ μ¬μ‚¬μ©
  }
}
```

### 6. μ„λΈμ¤ν¬λ¦½μ…(Subscription)

μ‹¤μ‹κ°„ λ°μ΄ν„° μ—…λ°μ΄νΈ μ”μ²­. WebSocketμ„ μ‚¬μ©.

```graphql
subscription {
  newUser {
    # μƒλ΅μ΄ μ‚¬μ©μ μ¶”κ°€ μ΄λ²¤νΈ κµ¬λ…
    id
    name
  }
}
```

### 7. λ””λ ‰ν‹°λΈ(Directive)

μΏΌλ¦¬μ λ™μ‘μ„ μ΅°κ±΄λ¶€λ΅ μ μ–΄.

```graphql
query {
  user(id: 1) {
    name
    email @include(if: true) # μ΅°κ±΄λ¶€λ΅ μ΄λ©”μΌ ν¬ν•¨
  }
}
```

# π¤” GraphQLμ€ μ–΄λ–»κ² κµ¬ν„ν•΄μ•Όλ κΉ?

> GraphQLμ€ **Graph Query Language**μ μ•½μλ΅, λ°μ΄ν„°λ¥Ό μ§μν•λ” μ–Έμ–΄μ…λ‹λ‹¤. SQLμ΄ λ°μ΄ν„°λ² μ΄μ¤λ¥Ό λ‹¤λ£¨λ” λ° μ‚¬μ©λλ” κ²ƒμ²λΌ, GraphQLμ€ ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”ν• λ°μ΄ν„°λ¥Ό ν¨μ¨μ μΌλ΅ μ”μ²­ν•κ³  μ΅°μ‘ν•  μ μλ„λ΅ μ„¤κ³„λμ—μµλ‹λ‹¤.

> GraphQLμ„ κµ¬ν„ν•κΈ° μ„ν•΄ λ‹¤μ–‘ν• λΌμ΄λΈλ¬λ¦¬μ™€ λ„κµ¬κ°€ μ κ³µλλ©°, GraphQL κ³µμ‹ μ‚¬μ΄νΈ([GraphQL Tools & Libraries](https://graphql.org/community/tools-and-libraries/))μ—μ„ μ–Έμ–΄μ™€ ν™κ²½μ— λ§λ” λΌμ΄λΈλ¬λ¦¬λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ μ‚¬μ©ν•λ” μ–Έμ–΄λ‚ ν”„λ μ„μ›ν¬μ— μ ν•©ν• λ„κµ¬λ¥Ό μ‰½κ² μ„ νƒν•μ—¬ ν™μ©ν•  μ μμµλ‹λ‹¤.
